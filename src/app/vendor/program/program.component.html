<nz-drawer [nzClosable]="false" [nzVisible]="visible" nzPlacement="right" nzTitle="Alertas" (nzOnClose)="close()">
  <div class="m-t-40">
    <div class="overflow-y-auto p-l-10 p-t-15">
      <nz-timeline>
        <nz-timeline-item *ngFor="let item of activityList" [nzDot]="dotTemplate">
          <div class="m-l-20">
            <h5 class="m-b-5">{{item.studentName}}</h5>
            <p class="m-b-0">
              <span class="font-weight-semibold">{{ item.vehicle }} - {{ item.route }}</span>
              <span class="m-l-5"> {{item.studentId}}</span>
            </p>
            <span class="text-muted font-size-13">
              <i nz-icon nzType="clock-circle" theme="outline"></i>
              <span class="m-l-5">{{formatDate(item.created)}}</span>
            </span>
          </div>
          <ng-template #dotTemplate>
            <div class="font-size-20 p-5">
              <i *ngIf="item.type == 'access'" class="text-success" nz-icon nzType="check" theme="outline"></i>
              <i *ngIf="item.type == 'Attached file'" class="text-info" nz-icon nzType="paper-clip" theme="outline"></i>
              <i *ngIf="item.type == 'Commented'" class="text-info" nz-icon nzType="message" theme="outline"></i>
              <i *ngIf="item.type == 'duplicate'" class="text-danger" nz-icon nzType="close-circle" theme="outline"></i>
            </div>
          </ng-template>
        </nz-timeline-item>
      </nz-timeline>
    </div>
  </div>
</nz-drawer>

<div nz-row [nzGutter]="8">
  <div nz-col nzSpan="8">

    <nz-card style="width:100%;" nzTitle="ProgramaciÃ³n" [nzExtra]="extraTemplate">
      <nz-calendar [nzFullscreen]="false" (nzSelectChange)="onValueChange($event)"
        (nzPanelChange)="onPanelChange($event)"></nz-calendar>
    </nz-card>
    <ng-template #extraTemplate>
      <button nz-button nzNoAnimation nz-dropdown [nzDropdownMenu]="menu" style="border: none; padding: 0">
        <i nz-icon nzType="ellipsis" nzTheme="outline" style="font-size: 20px; vertical-align: top;"></i>
      </button>
      <!-- <button nz-button nz-dropdown [nzDropdownMenu]="menu"><i nz-icon nzType="ellipsis"></i></button> -->
      <nz-dropdown-menu #menu="nzDropdownMenu">
        <ul nz-menu>
          <li nz-menu-item (click)="getAssignments()">
            Ver asignaciones para {{ date | date: 'mediumDate' }}
          </li>
        </ul>
      </nz-dropdown-menu>
    </ng-template>

  </div>
  <div nz-col nzSpan="16">
    

  </div>
</div>

<nz-card style="width:100%;" [nzBodyStyle]="{ 'padding': '0px' }" nzTitle="Detalles">
  <div>
  <ag-grid-angular #agGrid style="width: 100%; height: 450px;" 
  class="ag-theme-material" [rowData]="rowData"
  [onGridReady]='onGridReady' [columnDefs]="columnFleetDefsProgram" 
  [defaultColDef]="columnProgram" [groupIncludeFooter]="true" 
  [sideBar]="true">
</ag-grid-angular>
</div>

</nz-card>

<nz-modal [(nzVisible)]="isAssignmentsModalVisible" nzTitle="Asignaciones" nzWidth="1000px"
 (nzOnCancel)="handleCancel()"  [nzFooter]="modalFooter">
  <div>
    <ag-grid-angular #agGridProgramacion style="width: 100%; height: 450px;" 
    class="ag-theme-material" [rowData]="rowDataAsignaciones"
    [onGridReady]='onGridReady' [columnDefs]="columnFleetDefsAsingaciones" 
  
    [defaultColDef]="columnAsignacion" [groupIncludeFooter]="true" 
    [sideBar]="true" rowSelection="multiple">
  </ag-grid-angular>
  </div>
  <ng-template #modalFooter>
    <button nz-button nzType="default" (click)="handleCancel()">Cancelar</button>
    <button nz-button nzType="primary" (click)="handleOk()" [nzLoading]="isConfirmLoading">Programar</button>
  </ng-template>
</nz-modal>